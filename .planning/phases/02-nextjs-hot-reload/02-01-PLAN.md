---
phase: 02-nextjs-hot-reload
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - showcase/next.config.ts
  - docs/next.config.mjs
autonomous: true
requirements:
  - NEXT-01
  - NEXT-02
  - NEXT-03

must_haves:
  truths:
    - "All Next.js apps list every workspace dependency in transpilePackages"
    - "Editing packages/core triggers HMR in apps/web without manual rebuild"
    - "react-sdk HMR limitation is documented — dev:sdk watch mode is the workaround"
  artifacts:
    - path: "showcase/next.config.ts"
      provides: "transpilePackages with @tambo-ai/react added"
      contains: "@tambo-ai/react"
    - path: "docs/next.config.mjs"
      provides: "transpilePackages with @tambo-ai/react added"
      contains: "@tambo-ai/react"
  key_links:
    - from: "showcase/next.config.ts"
      to: "@tambo-ai/react"
      via: "transpilePackages array"
      pattern: "transpilePackages.*@tambo-ai/react"
    - from: "docs/next.config.mjs"
      to: "@tambo-ai/react"
      via: "transpilePackages array"
      pattern: "transpilePackages.*@tambo-ai/react"
---

<objective>
Add all workspace package dependencies to transpilePackages for showcase and docs Next.js apps, and document the react-sdk HMR limitation.

Purpose: Complete NEXT-01 (all workspace packages in transpilePackages), satisfy NEXT-03 (packages/core HMR already works from Phase 1), and address NEXT-02 (react-sdk exports compiled JS so true HMR requires dev:sdk watch mode, not transpilePackages).

Output: Updated next.config files for showcase and docs; apps/web already configured in Phase 1.
</objective>

<execution_context>
@/Users/lachlan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/lachlan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-setup/01-01-SUMMARY.md
@showcase/next.config.ts
@docs/next.config.mjs
@apps/web/next.config.mjs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add workspace packages to transpilePackages in showcase and docs</name>
  <files>showcase/next.config.ts, docs/next.config.mjs</files>
  <action>
Add `@tambo-ai/react` to the transpilePackages array in both showcase/next.config.ts and docs/next.config.mjs.

**showcase/next.config.ts** currently has:

```ts
transpilePackages: ["@tambo-ai/ui-registry"],
```

Change to:

```ts
transpilePackages: ["@tambo-ai/react", "@tambo-ai/ui-registry"],
```

**docs/next.config.mjs** currently has:

```js
transpilePackages: ["@tambo-ai/ui-registry"],
```

Change to:

```js
transpilePackages: ["@tambo-ai/react", "@tambo-ai/ui-registry"],
```

Note: showcase and docs only depend on @tambo-ai/react and @tambo-ai/ui-registry as workspace packages (plus @tambo-ai/typescript-sdk which is external from npm). They do NOT depend on @tambo-ai-cloud/\* packages, so those should NOT be added.

Note on NEXT-02: react-sdk exports compiled JS (esm/index.js and dist/index.js), not source TypeScript. Adding it to transpilePackages ensures Next.js processes it correctly, but true HMR on react-sdk source edits requires running `npm run dev:sdk` (tsc watch mode) in parallel. This is by design since react-sdk is published to npm. Phase 4 (TURBO-01) will integrate this into the Turbo dev pipeline.

Note on NEXT-03: packages/core was already added to transpilePackages in apps/web during Phase 1. Since packages/core exports source TypeScript (./src/index.ts), editing it already triggers HMR in apps/web. Showcase and docs don't directly import packages/core, so no config needed there.
</action>
<verify>
Run these checks:

1. `grep "transpilePackages" showcase/next.config.ts` — should show @tambo-ai/react and @tambo-ai/ui-registry
2. `grep "transpilePackages" docs/next.config.mjs` — should show @tambo-ai/react and @tambo-ai/ui-registry
3. `npm run check-types` — passes
4. `npm run lint` — passes
   </verify>
   <done>
   All three Next.js apps (apps/web, showcase, docs) list every workspace package they depend on in transpilePackages. react-sdk HMR limitation documented in plan summary.
   </done>
   </task>

</tasks>

<verification>
1. apps/web/next.config.mjs has transpilePackages with @tambo-ai/ui-registry, @tambo-ai-cloud/core, @tambo-ai-cloud/db, @tambo-ai-cloud/backend (from Phase 1)
2. showcase/next.config.ts has transpilePackages with @tambo-ai/react, @tambo-ai/ui-registry
3. docs/next.config.mjs has transpilePackages with @tambo-ai/react, @tambo-ai/ui-registry
4. `npm run check-types` passes
5. `npm run lint` passes
</verification>

<success_criteria>

- NEXT-01: Every workspace package consumed by a Next.js app is listed in that app's transpilePackages
- NEXT-02: react-sdk is in transpilePackages; limitation documented that source-level HMR requires dev:sdk watch mode (Phase 4 scope)
- NEXT-03: packages/core already in apps/web transpilePackages from Phase 1, confirmed working
  </success_criteria>

<output>
After completion, create `.planning/phases/02-nextjs-hot-reload/02-01-SUMMARY.md`
</output>
