---
title: Image Attachments
description: Add image attachment support to message threads
---

### Image attachments

Users can attach images to their messages through file picker, drag & drop, or clipboard paste.

## Using MessageInput with images

The `MessageInput` component provides built-in image attachment functionality:

```tsx
import {
  MessageInput,
  MessageInputTextarea,
  MessageInputFileButton,
  MessageInputSubmitButton,
  MessageInputAttachments,
  MessageInputToolbar,
} from "@tambo-ai/react";

function ChatInterface() {
  return (
    <MessageInput contextKey="my-chat">
      <MessageInputAttachments />
      <MessageInputTextarea placeholder="Type a message or attach images..." />
      <MessageInputToolbar>
        <MessageInputFileButton />
        <MessageInputSubmitButton />
      </MessageInputToolbar>
    </MessageInput>
  );
}
```

> `MessageInputStagedImages` is still exported as a deprecated alias. Prefer `MessageInputAttachments` for new code.

## Image input methods

- **File picker**: Click the file button to select images
- **Drag & drop**: Drag images directly onto the input area
- **Clipboard paste**: Use Ctrl+V (or Cmd+V) to paste images

## Custom image handling

Use the `useMessageAttachments` hook for custom image management. A legacy `useMessageImages` alias is still exported for backwards compatibility:

```tsx
import { useMessageAttachments } from "@tambo-ai/react";

function CustomImageHandler() {
  const {
    attachments,
    addAttachments,
    removeAttachment,
    clearAttachments,
  } = useMessageAttachments({
    validateFile: (file) => {
      if (!file.type.startsWith("image/")) {
        throw new Error("Only image files are allowed");
      }
    },
  });

  const images = attachments.filter((attachment) => attachment.kind === "image");

  const handleFileUpload = async (files: FileList) => {
    await addAttachments(Array.from(files));
  };

  return (
    <div>
      {images.map((image) => (
        <div key={image.id}>
          <img src={image.previewUrl ?? image.dataUrl} alt={image.name} />
          <button onClick={() => removeAttachment(image.id)}>Remove</button>
        </div>
      ))}
      <button onClick={clearAttachments}>Clear images</button>
    </div>
  );
}
```

Only image files are accepted in this example. When you're ready to add more formats, extend the `detectAttachmentKind` guard inside `useMessageAttachments`.
