---
title: Context Attachments
description: Stage context pieces that will be sent with the next user message
---

Context attachments allow you to stage context pieces that will be automatically included in the `additionalContext` when the next message is sent.

## How context attachments work

Context attachments are automatically registered as context helpers when added. They will be included in the `additionalContext` when the next user message is sent, and are cleared after submission.

## Basic Usage

The `useTamboContextAttachment` hook provides methods to manage context attachments:

```tsx
import { useTamboContextAttachment } from "@tambo-ai/react";

function FileViewer({ file }) {
  const { addContextAttachment, removeContextAttachment } =
    useTamboContextAttachment();

  const handleSelectFile = () => {
    addContextAttachment(
      file.content, // context value (string)
      file.name, // display name
      "file", // optional type
    );
  };

  return <button onClick={handleSelectFile}>Focus on {file.name}</button>;
}
```

## Context Attachment Structure

Each context attachment has the following structure:

```tsx
interface ContextAttachment {
  id: string; // Auto-generated unique identifier
  displayName: string; // Display name for UI rendering
  context: string; // The context value that will be used in additionalContext
  type?: string; // Optional type identifier for grouping/rendering
}
```

## Hook API

The `useTamboContextAttachment` hook returns:

```tsx
const {
  attachments, // Array of active context attachments
  addContextAttachment, // Add a new context attachment
  removeContextAttachment, // Remove by ID
  clearContextAttachments, // Remove all attachments
} = useTamboContextAttachment();
```

### Adding Context Attachments

Add a context attachment by calling `addContextAttachment` with a context value, display name, and optional type:

```tsx
const { addContextAttachment } = useTamboContextAttachment();

// Simple context attachment
const attachment = addContextAttachment("selectedFile", "Button.tsx");

// With type for grouping
const attachment = addContextAttachment("selectedFile", "Button.tsx", "file");
```

The function returns the `ContextAttachment` object with an auto-generated `id`. Each attachment is automatically registered as a context helper and will be included in `additionalContext` when the next message is sent.

### Removing Context Attachments

Remove a specific context attachment by its ID:

```tsx
const { removeContextAttachment } = useTamboContextAttachment();

removeContextAttachment(attachment.id);
```

Or clear all attachments at once:

```tsx
const { clearContextAttachments } = useTamboContextAttachment();

clearContextAttachments();
```

### Accessing Active Attachments

Access the current attachments array:

```tsx
const { attachments } = useTamboContextAttachment();

// Use attachments for UI rendering or other purposes
attachments.forEach((attachment) => {
  console.log(attachment.displayName, attachment.context, attachment.type);
});
```

## Complete Example

Here's a complete example showing context attachments in a file browser:

```tsx
import { useTamboContextAttachment } from "@tambo-ai/react";

function FileBrowser({ files }) {
  const {
    attachments,
    addContextAttachment,
    removeContextAttachment,
    clearContextAttachments,
  } = useTamboContextAttachment();

  const handleFileClick = (file) => {
    // Stage the file content for the next message
    addContextAttachment(file.content, file.name, "file");
  };

  return (
    <div>
      {/* Display active attachments */}
      {attachments.length > 0 && (
        <div>
          <h3>Staged Context:</h3>
          {attachments.map((attachment) => (
            <div key={attachment.id}>
              <span>{attachment.displayName}</span>
              <button onClick={() => removeContextAttachment(attachment.id)}>
                Remove
              </button>
            </div>
          ))}
        </div>
      )}

      {/* File List */}
      <div>
        {files.map((file) => (
          <button key={file.id} onClick={() => handleFileClick(file)}>
            {file.name}
          </button>
        ))}
      </div>
    </div>
  );
}
```
