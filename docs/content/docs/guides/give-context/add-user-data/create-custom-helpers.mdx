---
title: Create Custom Context Helpers
description: Build your own context helpers for application-specific data
---

import LearnMore from "@/components/learn-more";
import { BookOpen } from "lucide-react";

This guide shows you how to create custom context helpers that automatically include your application-specific data with every message. Custom helpers allow you to provide context like user sessions, feature flags, device information, or any other data relevant to your AI interactions.

<LearnMore
  title="Understanding Additional Context"
  description="Learn about context helpers and when to use them"
  href="/concepts/additional-context"
  icon={BookOpen}
/>

## Prerequisites

- Basic configuration of context helpers (see [Configure Context Helpers](/guides/additional-context/configure-context-helpers))
- Understanding of React and TypeScript

## Step 1: Define a Helper Function

A context helper is simply a function that returns data. The function can be synchronous or asynchronous:

```tsx
// Synchronous helper
const themeHelper = () => ({
  theme: getTheme(),
  language: getLanguage(),
});

// Asynchronous helper
const sessionHelper = async () => ({
  sessionId: getSessionId(),
  startTime: getSessionStartTime(),
  user: await getCurrentUser(),
});
```

### Helper Function Rules

- Return an object, primitive value, or `null`/`undefined`
- Returning `null` or `undefined` skips including the context
- Can be sync or async (Tambo waits for async helpers)
- Should not throw errors (wrap in try/catch if needed)

## Step 2: Register the Helper

Register your helper in `TamboProvider` with a key name:

```tsx
import { TamboProvider } from "@tambo-ai/react";

<TamboProvider
  contextHelpers={{
    // Key becomes the context name sent to the AI
    session: sessionHelper,
    theme: themeHelper,
  }}
>
  <YourApp />
</TamboProvider>;
```

The key you choose (`session`, `theme`) becomes the context name in messages sent to the AI.

## Common Patterns

### Pattern 1: User Session Context

Provide information about the current user and session:

```tsx
const sessionHelper = async () => {
  const user = await getCurrentUser();
  if (!user) return null; // Skip if no user logged in

  return {
    userId: user.id,
    email: user.email,
    role: user.role,
    sessionId: getSessionId(),
    sessionDuration: getSessionDuration(),
  };
};
```

### Pattern 2: Environment and Feature Flags

Include environment information and feature flags:

```tsx
const environmentHelper = async () => ({
  env: process.env.NODE_ENV,
  version: process.env.NEXT_PUBLIC_APP_VERSION,
  features: {
    betaAccess: await checkFeatureFlag("beta-access"),
    darkMode: await checkFeatureFlag("dark-mode"),
    advancedTools: await checkFeatureFlag("advanced-tools"),
  },
});
```

### Pattern 3: Device and Browser Information

Provide device context for responsive AI responses:

```tsx
const deviceHelper = () => {
  // Skip on server-side
  if (typeof window === "undefined") return null;

  return {
    userAgent: navigator.userAgent,
    platform: navigator.platform,
    screen: {
      width: window.screen.width,
      height: window.screen.height,
    },
    viewport: {
      width: window.innerWidth,
      height: window.innerHeight,
    },
  };
};
```

### Pattern 4: Application State

Share relevant application state with the AI:

```tsx
const appStateHelper = () => ({
  currentProject: getCurrentProjectId(),
  selectedItems: getSelectedItemIds(),
  filterSettings: getActiveFilters(),
  sortOrder: getCurrentSortOrder(),
});
```

## Inline Helpers

For simple helpers, define them inline in the provider configuration:

```tsx
<TamboProvider
  contextHelpers={{
    // Inline helper
    timestamp: () => ({
      current: new Date().toISOString(),
      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
    }),

    // Another inline helper
    preferences: async () => ({
      language: getUserLanguage(),
      notifications: getNotificationPreferences(),
    }),
  }}
>
```

## Overriding Prebuilt Helpers

Replace a prebuilt helper by using the same key:

```tsx
<TamboProvider
  contextHelpers={{
    // Override built-in userTime helper with custom formatting
    userTime: () => ({
      formattedTime: new Date().toLocaleString("en-US", {
        weekday: "long",
        year: "numeric",
        month: "long",
        day: "numeric",
        hour: "numeric",
        minute: "numeric",
      }),
      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
      isDaytime: new Date().getHours() >= 6 && new Date().getHours() < 18,
    }),
  }}
>
```

## Error Handling

Handle errors gracefully to prevent helpers from breaking message sending:

```tsx
const safeHelper = async () => {
  try {
    const data = await fetchData();
    return {
      data,
      status: "success",
    };
  } catch (error) {
    console.error("Helper failed:", error);
    // Return partial data or skip
    return null;
  }
};
```

## Performance Tips

- **Keep helpers fast**: Helpers run on every message, so avoid expensive operations
- **Cache when possible**: Store results that don't change frequently
- **Return null to skip**: Don't include context that's not relevant in the current state
- **Avoid large payloads**: Only include data the AI actually needs

## Next Steps

<LearnMore
  title="Manage Context Dynamically"
  description="Learn how to add and remove helpers at runtime"
  href="/guides/additional-context/manage-context-dynamically"
  icon={BookOpen}
/>
