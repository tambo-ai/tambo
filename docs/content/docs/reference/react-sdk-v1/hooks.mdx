---
title: React SDK 1.0 Hooks
description: Complete reference for @tambo-ai/react/v1 hooks - thread management, messaging, suggestions, and component state.
---

import { Callout } from "fumadocs-ui/components/callout";

<Callout type="warn" title="Preview Documentation">
  This documents the upcoming React SDK 1.0, currently in preview. The API may
  change before the stable release.
</Callout>

<Callout type="info" title="About the V1 Naming">
  The "V1" suffix in hook names (e.g., `useTamboV1`, `useTamboV1ThreadInput`) is
  temporary during the preview period. Before the stable 1.0 release, these will
  be renamed to their final forms (`useTambo`, `useTamboThreadInput`, etc.) and
  will become the primary exports from `@tambo-ai/react`.
</Callout>

The `@tambo-ai/react/v1` package provides hooks for building AI-powered applications with explicit thread management and React Query integration.

## useTamboV1

The primary entrypoint for the V1 SDK. Provides access to thread state, messages, streaming status, and registry functions.

```tsx
import { useTamboV1 } from "@tambo-ai/react/v1";

function Chat() {
  const {
    // Thread state
    thread,
    messages,
    currentThreadId,

    // Streaming status
    streamingState,
    isStreaming,
    isWaiting,
    isIdle,

    // Thread management
    initThread,
    switchThread,
    startNewThread,

    // Run control
    cancelRun,

    // Registry
    registerComponent,
    registerTool,
    registerTools,
    componentList,
    toolRegistry,

    // API client
    client,
    dispatch,
  } = useTamboV1();
}
```

### Return Values

#### Thread State

| Value             | Type                       | Description                                                      |
| ----------------- | -------------------------- | ---------------------------------------------------------------- |
| `thread`          | `ThreadState \| undefined` | Current thread state including messages and metadata             |
| `messages`        | `TamboV1Message[]`         | Array of messages in the current thread with computed properties |
| `currentThreadId` | `string`                   | ID of the currently active thread                                |

#### Streaming Status

| Value            | Type             | Description                                             |
| ---------------- | ---------------- | ------------------------------------------------------- |
| `streamingState` | `StreamingState` | Detailed streaming state including status, runId, error |
| `isStreaming`    | `boolean`        | `true` when actively streaming a response               |
| `isWaiting`      | `boolean`        | `true` when waiting for server response                 |
| `isIdle`         | `boolean`        | `true` when no generation is in progress                |

#### Run Control

| Value       | Type                  | Description                                                                       |
| ----------- | --------------------- | --------------------------------------------------------------------------------- |
| `cancelRun` | `() => Promise<void>` | Cancel the active run. No-op if there's no active run or thread is a placeholder. |

#### Thread Management

| Value            | Type                                                                 | Description                                     |
| ---------------- | -------------------------------------------------------------------- | ----------------------------------------------- |
| `initThread`     | `(threadId: string, initialThread?: Partial<TamboV1Thread>) => void` | Initialize a thread with optional initial state |
| `switchThread`   | `(threadId: string) => void`                                         | Switch to a different thread by ID              |
| `startNewThread` | `() => string`                                                       | Create a new thread and return its ID           |

#### Registry

| Value               | Type                                    | Description                      |
| ------------------- | --------------------------------------- | -------------------------------- |
| `registerComponent` | `(component: TamboV1Component) => void` | Register a component dynamically |
| `registerTool`      | `(tool: TamboTool) => void`             | Register a single tool           |
| `registerTools`     | `(tools: TamboTool[]) => void`          | Register multiple tools          |
| `componentList`     | `ComponentRegistry`                     | Map of registered components     |
| `toolRegistry`      | `Map<string, TamboTool>`                | Map of registered tools          |

### Example: Basic Chat

```tsx
import { useTamboV1, useTamboV1ThreadInput } from "@tambo-ai/react/v1";

function ChatInterface() {
  const { messages, isStreaming, startNewThread } = useTamboV1();
  const { value, setValue, submit } = useTamboV1ThreadInput();

  return (
    <div>
      <button onClick={() => startNewThread()}>New Chat</button>

      <div className="messages">
        {messages.map((msg) => (
          <MessageBubble key={msg.id} message={msg} />
        ))}
        {isStreaming && <LoadingIndicator />}
      </div>

      <input
        value={value}
        onChange={(e) => setValue(e.target.value)}
        onKeyDown={(e) => e.key === "Enter" && !e.shiftKey && submit()}
        disabled={isStreaming}
      />
    </div>
  );
}
```

## useTamboV1ThreadInput

Provides shared input state management across components. Input state is shared via the `TamboV1ThreadInputProvider`, allowing features like suggestions to update the input directly.

```tsx
import { useTamboV1ThreadInput } from "@tambo-ai/react/v1";

function MessageInput() {
  const {
    value,
    setValue,
    submit,
    images,
    addImage,
    addImages,
    removeImage,
    clearImages,
    threadId,
    isPending,
    isError,
    error,
  } = useTamboV1ThreadInput();
}
```

### Return Values

| Value         | Type                                                                      | Description                                                                                 |
| ------------- | ------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------- |
| `value`       | `string`                                                                  | Current input value                                                                         |
| `setValue`    | `Dispatch<SetStateAction<string>>`                                        | Update the input value                                                                      |
| `submit`      | `(options?: SubmitOptions) => Promise<{ threadId: string \| undefined }>` | Submit the current input (see [SubmitOptions](/reference/react-sdk-v1/types#submitoptions)) |
| `images`      | `StagedImage[]`                                                           | Array of staged images                                                                      |
| `addImage`    | `(file: File) => Promise<void>`                                           | Add a single image                                                                          |
| `addImages`   | `(files: File[]) => Promise<void>`                                        | Add multiple images                                                                         |
| `removeImage` | `(id: string) => void`                                                    | Remove a staged image                                                                       |
| `clearImages` | `() => void`                                                              | Clear all staged images                                                                     |
| `threadId`    | `string \| undefined`                                                     | Current thread ID                                                                           |
| `isPending`   | `boolean`                                                                 | `true` while submission is in progress                                                      |
| `isError`     | `boolean`                                                                 | `true` if submission failed                                                                 |
| `error`       | `Error \| null`                                                           | Error details if submission failed                                                          |

### Example: Input with Images

```tsx
function RichInput() {
  const { value, setValue, submit, images, addImage, removeImage, isPending } =
    useTamboV1ThreadInput();

  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const files = Array.from(e.target.files || []);
    for (const file of files) {
      await addImage(file);
    }
  };

  return (
    <div>
      <div className="staged-images">
        {images.map((img) => (
          <div key={img.id}>
            <img src={img.dataUrl} alt={img.name} />
            <button onClick={() => removeImage(img.id)}>Remove</button>
          </div>
        ))}
      </div>

      <input type="file" accept="image/*" onChange={handleFileChange} />

      <textarea
        value={value}
        onChange={(e) => setValue(e.target.value)}
        disabled={isPending}
      />

      <button onClick={() => submit()} disabled={isPending || !value.trim()}>
        Send
      </button>
    </div>
  );
}
```

## useTamboV1Thread

React Query hook to fetch a single thread by ID.

```tsx
import { useTamboV1Thread } from "@tambo-ai/react/v1";

function ThreadLoader({ threadId }: { threadId: string }) {
  const { data, isLoading, isError, error } = useTamboV1Thread(threadId);

  if (isLoading) return <Loading />;
  if (isError) return <Error message={error.message} />;

  return <ThreadView thread={data} />;
}
```

### Parameters

| Parameter  | Type              | Description                  |
| ---------- | ----------------- | ---------------------------- |
| `threadId` | `string`          | The thread ID to fetch       |
| `options`  | `UseQueryOptions` | Optional React Query options |

### Return Values

Returns a standard React Query `UseQueryResult<ThreadRetrieveResponse>`.

The query has a `staleTime` of 1000ms by default for real-time data freshness.

## useTamboV1ThreadList

React Query hook to list threads for the current user.

```tsx
import { useTamboV1ThreadList } from "@tambo-ai/react/v1";

function ThreadSidebar() {
  const { data, isLoading } = useTamboV1ThreadList();

  if (isLoading) return <Loading />;

  return (
    <ul>
      {data?.threads.map((thread) => (
        <li key={thread.id}>{thread.title || "Untitled"}</li>
      ))}
    </ul>
  );
}
```

### Parameters

| Parameter      | Type                | Description                  |
| -------------- | ------------------- | ---------------------------- |
| `listOptions`  | `ThreadListOptions` | Optional filtering options   |
| `queryOptions` | `UseQueryOptions`   | Optional React Query options |

#### ThreadListOptions

| Property  | Type     | Description                             |
| --------- | -------- | --------------------------------------- |
| `userKey` | `string` | User key (defaults to provider context) |
| `limit`   | `number` | Maximum threads to return               |
| `cursor`  | `string` | Pagination cursor                       |

### Return Values

Returns a standard React Query `UseQueryResult<ThreadListResponse>`.

The query has a `staleTime` of 5000ms by default.

## useTamboV1ComponentState

Bidirectional state synchronization between component and server. Similar to React's `useState`, but syncs state changes with the Tambo server.

```tsx
import { useTamboV1ComponentState } from "@tambo-ai/react/v1";

function Counter() {
  const [count, setCount, { isPending, error, flush }] =
    useTamboV1ComponentState("count", 0);

  return (
    <div>
      <span>{count}</span>
      <button onClick={() => setCount((c) => c + 1)} disabled={isPending}>
        Increment
      </button>
    </div>
  );
}
```

### Parameters

| Parameter      | Type     | Default  | Description                             |
| -------------- | -------- | -------- | --------------------------------------- |
| `keyName`      | `string` | Required | Unique key identifying this state       |
| `initialValue` | `S`      | Required | Initial state value                     |
| `debounceTime` | `number` | `500`    | Milliseconds to debounce server updates |

### Return Values

Returns a tuple: `[currentState, setState, meta]`

| Value            | Type                                        | Description                                |
| ---------------- | ------------------------------------------- | ------------------------------------------ |
| `currentState`   | `S`                                         | Current state value                        |
| `setState`       | `(newState: S \| ((prev: S) => S)) => void` | State setter (supports functional updates) |
| `meta.isPending` | `boolean`                                   | `true` while syncing with server           |
| `meta.error`     | `Error \| null`                             | Error if sync failed                       |
| `meta.flush`     | `() => void`                                | Immediately flush pending updates          |

<Callout type="info">
  This hook only works within components rendered via `V1ComponentRenderer` or
  components that are part of the V1 message rendering pipeline.
</Callout>

### Example: Editable Card

```tsx
function EditableCard({ title: initialTitle }: { title: string }) {
  const [title, setTitle, { isPending }] = useTamboV1ComponentState(
    "title",
    initialTitle,
    300, // debounce 300ms
  );

  return (
    <div>
      <input
        value={title}
        onChange={(e) => setTitle(e.target.value)}
        className={isPending ? "saving" : ""}
      />
      {isPending && <span>Saving...</span>}
    </div>
  );
}
```

## useTamboV1StreamStatus

Track streaming status for components rendered via `V1ComponentRenderer`. Provides both overall stream status and per-prop granularity.

**Important**: Props update repeatedly during streaming and may be partial. Use `propStatus.<field>?.isSuccess` before treating a prop as complete.

```tsx
import { useTamboV1StreamStatus } from "@tambo-ai/react/v1";

function MyComponent(props: MyProps) {
  const { streamStatus, propStatus } = useTamboV1StreamStatus<MyProps>();

  if (streamStatus.isPending) return <Skeleton />;

  return (
    <div>
      <h2 className={propStatus.title?.isStreaming ? "animate-pulse" : ""}>
        {props.title}
      </h2>
      {streamStatus.isSuccess && <p>Stream complete</p>}
    </div>
  );
}
```

### Return Values

| Value          | Type                                                         | Description                                                                              |
| -------------- | ------------------------------------------------------------ | ---------------------------------------------------------------------------------------- |
| `streamStatus` | [`StreamStatus`](/reference/react-sdk-v1/types#streamstatus) | Overall streaming status for the component                                               |
| `propStatus`   | `Record<keyof Props, PropStatus>`                            | Per-prop streaming status (see [`PropStatus`](/reference/react-sdk-v1/types#propstatus)) |

<Callout type="info">
  This hook only works inside components rendered via `V1ComponentRenderer`. The
  renderer provides the necessary context for tracking streaming state.
</Callout>

## useTamboV1Suggestions

Generate and manage AI-powered message suggestions.

```tsx
import { useTamboV1Suggestions } from "@tambo-ai/react/v1";

function SuggestionChips() {
  const {
    suggestions,
    accept,
    generate,
    isLoading,
    isGenerating,
    isAccepting,
  } = useTamboV1Suggestions();

  return (
    <div>
      {suggestions.map((suggestion) => (
        <button
          key={suggestion.id}
          onClick={() => accept({ suggestion, shouldSubmit: true })}
          disabled={isAccepting}
        >
          {suggestion.text}
        </button>
      ))}

      <button onClick={() => generate()} disabled={isGenerating}>
        Refresh Suggestions
      </button>
    </div>
  );
}
```

### Options

```tsx
const result = useTamboV1Suggestions({
  maxSuggestions: 3, // 1-10, default 3
  autoGenerate: true, // auto-generate on mount, default true
  queryOptions: {}, // React Query options
});
```

### Return Values

| Value                  | Type                                                   | Description                            |
| ---------------------- | ------------------------------------------------------ | -------------------------------------- |
| `data`                 | `SuggestionsQueryResponse \| undefined`                | Raw query response                     |
| `suggestions`          | `Suggestion[]`                                         | Array of suggestion objects            |
| `isLoading`            | `boolean`                                              | Initial loading state                  |
| `isSuccess`            | `boolean`                                              | Query succeeded                        |
| `isError`              | `boolean`                                              | Query failed                           |
| `error`                | `Error \| null`                                        | Query error                            |
| `isFetching`           | `boolean`                                              | Fetching (includes background refetch) |
| `generate`             | `() => Promise<SuggestionCreateResponse \| undefined>` | Generate new suggestions               |
| `isGenerating`         | `boolean`                                              | Generation in progress                 |
| `generateError`        | `Error \| null`                                        | Generation error                       |
| `accept`               | `(options: AcceptSuggestionOptions) => Promise<void>`  | Accept a suggestion                    |
| `isAccepting`          | `boolean`                                              | Accept in progress                     |
| `acceptError`          | `Error \| null`                                        | Accept error                           |
| `selectedSuggestionId` | `string \| null`                                       | Currently selected suggestion          |

### AcceptSuggestionOptions

| Property       | Type         | Description                        |
| -------------- | ------------ | ---------------------------------- |
| `suggestion`   | `Suggestion` | The suggestion to accept           |
| `shouldSubmit` | `boolean`    | Submit immediately after accepting |

## useTamboV1SendMessage

Low-level hook for sending messages with streaming. Most applications should use `useTamboV1ThreadInput` instead.

```tsx
import { useTamboV1SendMessage } from "@tambo-ai/react/v1";

function CustomSendButton({ threadId }: { threadId: string }) {
  const { mutate, isPending } = useTamboV1SendMessage(threadId);

  const handleSend = () => {
    mutate({
      message: {
        role: "user",
        content: [{ type: "text", text: "Hello!" }],
      },
      userMessageText: "Hello!", // For optimistic UI
    });
  };

  return (
    <button onClick={handleSend} disabled={isPending}>
      Send
    </button>
  );
}
```

### Parameters

| Parameter  | Type                  | Description                                  |
| ---------- | --------------------- | -------------------------------------------- |
| `threadId` | `string \| undefined` | Thread to send to (creates new if undefined) |

### Return Values

Returns a React Query `UseMutationResult`.

## Re-exported Hooks

The following hooks are re-exported from the base SDK for convenience:

### useTamboClient

Access the Tambo API client directly.

```tsx
import { useTamboClient } from "@tambo-ai/react/v1";

function ApiExample() {
  const client = useTamboClient();

  const fetchData = async () => {
    const threads = await client.beta.threads.list();
    // ...
  };
}
```

### useMessageImages

Manage staged images for message input.

```tsx
import { useMessageImages } from "@tambo-ai/react/v1";

const { images, addImage, addImages, removeImage, clearImages } =
  useMessageImages();
```

### useTamboVoice

Record and transcribe speech.

```tsx
import { useTamboVoice } from "@tambo-ai/react/v1";

const {
  startRecording,
  stopRecording,
  isRecording,
  isTranscribing,
  transcript,
  transcriptionError,
  mediaAccessError,
} = useTamboVoice();
```
